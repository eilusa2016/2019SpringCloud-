server:
  port: 8080
#spring:
#  profiles:
#    active: after_route
    
#再建一个配置文件，语法是三个横线
#---
#spring:
#  cloud:
#    gateway:
#      routes:
#      - id: after_route
#        uri: http://httpbin.org:80/get
#        predicates:
#        - After=2017-01-20T17:42:47.789-07:00[America/Denver]
#  profiles: after_route
#解释：  
#  在此配置文件中通过spring.profiles来配置文件名，和spring.profiles.active一致，然后配置spring cloud gateway 相关的配置，
#  id标签配置的是router的id，每个router都需要一个唯一的id，uri配置的是将请求路由到哪里，本案例全部路由到http://httpbin.org:80/get
#  当请求的时间在这个配置的时间之后，请求会被路由到http://httpbin.org:80/get。



spring:
  cloud:
    gateway:
      routes:
      - id: limit_route
        uri: http://httpbin.org:80/get
        predicates:
        - After=2017-01-20T17:42:47.789-07:00[America/Denver]
        filters:
        - name: RequestRateLimiter
          args:
            key-resolver: '#{@hostAddrKeyResolver}'
            redis-rate-limiter.replenishRate: 1
            redis-rate-limiter.burstCapacity: 3
  application:
    name: gateway-limiter

#redis  主要是限流用到
redis:
  host: localhost
  port: 6379
  database: 0